<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8"><title>VS Code Docs</title><meta name="description" content="Visual Studio Code (VS Code) Docs の日本語訳"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://vscode-doc-jp.github.io/docs/extensions/example-debuggers.html"><link rel="stylesheet" href="/css/navy.css"><link rel="stylesheet" href="/css/accordion.css"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"><link rel="alternate" href="/atom.xml" title="VS Code Docs"><script>!function(e,t,a,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=t.createElement(a),s=t.getElementsByTagName(a)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-92801937-1","auto"),ga("send","pageview")</script></head><body><div id="container"><header id="header" class="wrapper"><div id="header-inner" class="inner"><h1 id="logo-wrap"><a href="/" id="logo">Visual Studio Code</a></h1><nav id="main-nav"><a href="/docs/" class="main-nav-link">Docs</a><a href="/updates/" class="main-nav-link">Updates</a><div id="search-input-wrap"><div id="search-input-icon"><i class="fa fa-search"></i></div><input type="search" id="search-input" placeholder="Search..."></div></nav><a id="mobile-nav-toggle"><span class="mobile-nav-toggle-bar"></span> <span class="mobile-nav-toggle-bar"></span> <span class="mobile-nav-toggle-bar"></span></a></div></header><div id="content-wrap"><div id="content" class="wrapper"><div id="content-inner"><header role="navigation"><div class="inner"><nav class="small_nav"><h4>Topics</h4><form name="SmallNav"><select class="small_nav_dropdown" name="doropdown" onchange="location.href=document.SmallNav.doropdown.options[document.SmallNav.doropdown.selectedIndex].value"><optgroup class="small-nav-title" label="Setup"><option value="/docs/setup/setup-overview.html" class="small-nav-link" undefined>Overview</option><option value="/docs/setup/linux.html" class="small-nav-link" undefined>Linux</option><option value="/docs/setup/windows.html" class="small-nav-link" undefined>Windows</option><option value="/docs/setup/additional-components.html" class="small-nav-link" undefined>Additional Compnents</option></optgroup><optgroup class="small-nav-title" label="GetStarted"><option value="/docs/getstarted/introvideos.html" class="small-nav-link" undefined>Intro Videos</option><option value="/docs/getstarted/themes.html" class="small-nav-link" undefined>Themes</option><option value="/docs/getstarted/settings.html" class="small-nav-link" undefined>Settings</option><option value="/docs/getstarted/keybindings.html" class="small-nav-link" undefined>Key Bindings</option><option value="/docs/getstarted/locales.html" class="small-nav-link" undefined>Display Language</option></optgroup><optgroup class="small-nav-title" label="UserGuide"><option value="/docs/userguide/intellisense.html" class="small-nav-link" undefined>IntelliSense</option><option value="/docs/userguide/versioncontrol.html" class="small-nav-link" undefined>Version Control</option><option value="/docs/userguide/userdefinedsnippets.html" class="small-nav-link" undefined>Creating your own Snippets</option><option value="/docs/userguide/command-line.html" class="small-nav-link" undefined>Command Line</option><option value="/docs/userguide/accessibility.html" class="small-nav-link" undefined>Accessibility</option></optgroup><optgroup class="small-nav-title" label="Languages"><option value="/docs/languages/overview.html" class="small-nav-link" undefined>Overview</option><option value="/docs/languages/css.html" class="small-nav-link" undefined>CSS, Sass and Less</option><option value="/docs/languages/cpp.html" class="small-nav-link" undefined>C++</option></optgroup><optgroup class="small-nav-title" label="Extensions"><option value="/docs/extensions/overview.html" class="small-nav-link" undefined>Overview</option></optgroup><optgroup class="small-nav-title" label="ExtensionAPI"><option value="/docs/extensionAPI/overview.html" class="small-nav-link" undefined>Overview</option></optgroup><optgroup class="small-nav-title" label="Supporting"><option value="/docs/supporting/faq.html" class="small-nav-link" undefined>FAQ</option><option value="/docs/supporting/requirements.html" class="small-nav-link" undefined>Requirements</option></optgroup><optgroup class="small-nav-title" label="Other"><option value="/docs/other/dotnet.html" class="small-nav-link" undefined>.NET Core</option></optgroup></select></form></nav></div></header><article class="article-container" itemscope itemtype="http://schema.org/Article"><div class="article-inner"><div class="article"><div class="inner"><header class="article-header"><h1 class="article-title" itemprop="name"></h1><a href="https://github.com/vscode-doc-jp/Docs/edit/master/extensions/example-debuggers.md" class="article-edit-link" title="Improve this doc"><i class="fa fa-pencil"></i></a><h2><time class="article-updated" data-position="header" datetime="2017-03-23T12:45:32.502Z" itemprop="dateModified">Last updated: 2017-03-23</time></h2></header><div class="article-content" itemprop="articleBody"><h1 id="Example-Debuggers" class="article-heading"><a href="#Example-Debuggers" class="headerlink" title="Example - Debuggers"></a>Example - Debuggers<a class="article-anchor" href="#Example-Debuggers" aria-hidden="true"></a></h1><p>Since Visual Studio Code implements a generic (language agnostic) debug UI, it cannot talk to real debuggers directly but instead relies on debug extensions for implementing the debugger or runtime specific functionality.</p><p>These debug extensions differ from other extensions in that their implementation is not running in the extension host, but as a separate standalone program, a so-called <em>debug adapter</em>. We call these programs adapters because they “adapt” the API or protocol of a concrete debugger or runtime to the <em>VS Code Debug Protocol</em> used by VS Code.</p><p><img src="images/example-debuggers/debug-arch.png" alt="Debugger Architecture"></p><p>The reasons for implementing the debug adapters as standalone excutables are twofold: first, it makes it possible to implement the adapter in the language most suitable for the given debugger or runtime. Second, a standalone program can more easily run in elevated mode if this is required by the underlying debugger or runtime.</p><p>In order to avoid problems with local firewalls, VS Code communicates with the adapter through stdin/stdout instead of using a more sophisticated mechanism (e.g. sockets).</p><p>Every debug extension defines a debug <code>type</code> which is referenced from a VS Code launch configuration.<br>When a debug session is started, VS Code looks up the debug extension based on the debug type and launches the extension’s debug adapter executable as a separate process. When the debug session ends, the adapter is stopped.</p><p>Visual Studio Code ships with two debug extensions for Node.js: <code>node-debug</code> uses the (deprecated) v8 Debugger Protocol for node versions &lt; 6.3 and <code>node-debug2</code> uses the Chrome Debugger Protocol (CDP) supported by node versions &gt;= 6.3. Many more debugger extensions are available from the <a href="https://marketplace.visualstudio.com/vscode/Debuggers" target="_blank" rel="external">VS Code Marketplace</a> or you can create a debugger extension yourself.</p><p>The rest of this document shows how to develop a debugger extension.</p><h2 id="The-Mock-Debug-Extension" class="article-heading"><a href="#The-Mock-Debug-Extension" class="headerlink" title="The Mock Debug Extension"></a>The Mock Debug Extension<a class="article-anchor" href="#The-Mock-Debug-Extension" aria-hidden="true"></a></h2><p>Since creating a debug adapter from scratch is a bit heavy for this tutorial, we will start with a simple debug adapter which we have created as an educational debug adapter ‘starter kit’. It is called <em>Mock Debug</em> because it does not talk to a real debugger but it ‘mocks’ one. So Mock Debug simulates a debugger and supports step, continue, breakpoints, exceptions, and variable access but it is not connected to any real debugger.</p><p>Before delving into the development setup for mock-debug, let’s first install a <a href="https://marketplace.visualstudio.com/items/andreweinand.mock-debug" target="_blank" rel="external">pre-built version</a><br>from the VS Code Marketplace and play with it:</p><ul><li>switch to the Extensions viewlet and type ‘mock’ to search for the Mock Debug extension,</li><li>‘Install’ and ‘Reload’ the extension.</li></ul><p>To try Mock Debug:</p><ul><li>Create a new empty folder <code>mock test</code> and open it in VS Code.</li><li>Create a file <code>readme.md</code> and enter several lines of arbitrary text.</li><li>Switch to the Debug view and press the gear icon.</li><li>VS Code will let you select an ‘environment’ in order to create a default launch configuration. Pick “Mock Debug”.</li><li>Press the green Start button and then Enter to confirm the suggested file ‘readme.md’.</li></ul><p>A debug session starts and you can ‘step’ through the readme file, set and hit breakpoints, and run into exceptions (if the word <code>exception</code> appears in a line).</p><p><img src="images/example-debuggers/mock-debug.gif" alt="Mock Debugger running"></p><p>Before using Mock Debug as a starting point for your own development, we recommend to uninstall the pre-built version first:</p><ul><li>switch to the Extensions viewlet and click on the gear icon of the Mock Debug extension,</li><li>run the ‘Uninstall’ action and then ‘Reload’ the window.</li></ul><h2 id="Development-Setup-for-Mock-Debug" class="article-heading"><a href="#Development-Setup-for-Mock-Debug" class="headerlink" title="Development Setup for Mock Debug"></a>Development Setup for Mock Debug<a class="article-anchor" href="#Development-Setup-for-Mock-Debug" aria-hidden="true"></a></h2><p>Now let’s get the source for Mock Debug and start development on it within VS Code:</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">git clone https://github.com/Microsoft/vscode-mock-debug.git</div><div class="line">cd vscode-mock-debug</div><div class="line">npm install</div></pre></td></tr></table></figure><p>Open the project folder <code>vscode-mock-debug</code> in VS Code.</p><p>What’s in the package?</p><ul><li><code>package.json</code> is the manifest for the mock-debug extension:<ul><li>it lists the contributions of the mock-debug extension,</li><li>the <code>compile</code> and <code>watch</code> scripts are used to transpile the TypeScript source into the <code>out</code> folder and watch for subsequent source modifications,</li><li>the dependencies <code>vscode-debugprotocol</code>, <code>vscode-debugadapter</code>, and <code>vscode-debugadapter-testsupport</code> are NPM modules that simplify the development of node-based debug adapters.</li></ul></li><li>the implementation of the debug adapter of the extension lives in <code>src/mockDebug.ts</code>. Here you find the handlers for the various requests of the VS Code debug protocol.</li><li>since the implementation of debug extension lives in the debug adapter, there is no need to have extension code at all (i.e. code that runs in the extension host process). However, Mock Debug has a small <code>src/extension.ts</code> because it illustrates what can be done in the extension code of a debug extension.</li></ul><p>Now build and launch the Mock Debug extension by selecting the <code>Extension</code> launch configuration and hitting <code>F5</code>.<br>Initially this will do a full transpile of the TypeScript sources into the <code>out</code> folder.<br>After the full build, a ‘watcher task’ is started that transpiles any changes you make.</p><p>After transpiling the source, a new VS Code window (‘[Extenson Development Host]’) appears with the Mock Debug extension now running in debug mode. From that window open your <code>mock test</code> project with the <code>readme.md</code> file, start a debug session with ‘F5’, and then step through it:</p><p><img src="images/example-debuggers/debug-mock-session.png" alt="Debugging Extension and Server"></p><p>Since you are running the extension in debug mode, you could now set and hit breakpoints in <code>src/extension.ts</code> but as I’ve mentioned above, there is not much interesting code executing in the extension. The interesting code runs in the debug adapter which is a separate process.</p><p>In order to debug the debug adapter itself, we have to run it in debug mode. This is most easily achieved by running the debug adapter in ‘server mode’ and configure VS Code to connect to it. In your VS Code vscode-mock-debug project select the launch configuration ‘server’ from the drop down menu and press the green Start button.</p><p>Since we already had an active debug session for the extension the VS Code debugger UI now enters ‘multi session’ mode which is indicated by seeing the names of the two debug sessions <strong>Extension</strong> and <strong>Server</strong> showing up in the CALL STACK view:</p><p><img src="images/example-debuggers/debug-extension-server.png" alt="Debugging Extension and Server"></p><p>Now we are able to debug both the extension and the debug adapter simultanously.<br>A faster way to arrive here is by using the <strong>Extension + Server</strong> launch configuration which launches both sessions automatically.</p><p>Set a breakpoint at the beginning of method <code>launchRequest(...)</code> in file <code>src/mockDebug.ts</code> and as a last step configure the mock debugger to connect to the debug adapter server by adding a <code>debugServer</code> attribute for port <code>4711</code> to your mock test launch config:</p><figure class="highlight json"><table><tr><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"version"</span>: <span class="string">"0.2.0"</span>,</div><div class="line">    <span class="attr">"configurations"</span>: [</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"type"</span>: <span class="string">"mock"</span>,</div><div class="line">            <span class="attr">"request"</span>: <span class="string">"launch"</span>,</div><div class="line">            <span class="attr">"name"</span>: <span class="string">"mock test"</span>,</div><div class="line">            <span class="attr">"program"</span>: <span class="string">"$&#123;workspaceRoot&#125;/readme.md"</span>,</div><div class="line">            <span class="attr">"stopOnEntry"</span>: <span class="literal">true</span>,</div><div class="line">            <span class="attr">"debugServer"</span>: <span class="number">4711</span></div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>If you now launch this debug configuration, VS Code does not start the mock debug adapter as a separate process but directly connects to local port 4711 of the already running server and you should hit the breakpoint in <code>launchRequest</code>.</p><p>With this setup you can now easily edit, transpile, and debug Mock Debug.</p><p>But now the real work begins: you will have to replace the ‘mock’ implementation of the debug adapter in <code>src/mockDebug.ts</code> by some ‘real’ code that talks to your debugger or runtime. This involves understanding and implementing the VS Code Debug Protocol. More details<br>about this can be found <a href="https://code.visualstudio.com/docs/extensionAPI/api-debugging" target="_blank" rel="external">here</a>.</p><h2 id="Anatomy-of-the-package-json-of-a-Debug-Extension" class="article-heading"><a href="#Anatomy-of-the-package-json-of-a-Debug-Extension" class="headerlink" title="Anatomy of the package.json of a Debug Extension"></a>Anatomy of the package.json of a Debug Extension<a class="article-anchor" href="#Anatomy-of-the-package-json-of-a-Debug-Extension" aria-hidden="true"></a></h2><p>Besides providing a debugger specific implementation of the debug adapter a debugger extension needs a <code>package.json</code> that contributes to the various debug related contributions points.</p><p>So let’s have a closer look at the <code>package.json</code> of Mock Debug.</p><p>Like every VS Code extension, the <code>package.json</code> declares the fundamental properties <strong>name</strong>, <strong>publisher</strong>, and <strong>version</strong> of the extension. Use the <strong>categories</strong> field to make the extension easier to find in the VS Code Extension Marketplace.</p><figure class="highlight json"><table><tr><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"name"</span>: <span class="string">"mock-debug"</span>,</div><div class="line">    <span class="attr">"version"</span>: <span class="string">"0.17.0"</span>,</div><div class="line">    <span class="attr">"publisher"</span>: <span class="string">"andreweinand"</span>,</div><div class="line">    <span class="attr">"description"</span>: <span class="string">"Starter extension for developing debug adapters for VS Code."</span>,</div><div class="line">    <span class="attr">"engines"</span>: &#123;</div><div class="line">        <span class="attr">"vscode"</span>: <span class="string">"^1.1.0"</span>,</div><div class="line">        <span class="attr">"node"</span>: <span class="string">"^6.5.0"</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">"categories"</span>: [ <span class="string">"Debuggers"</span> ],</div><div class="line"></div><div class="line">    <span class="attr">"activationEvents"</span>: [</div><div class="line">        <span class="string">"onCommand:extension.mock-debug.getProgramName"</span>,</div><div class="line">        <span class="string">"onCommand:extension.mock-debug.provideInitialConfigurations"</span></div><div class="line">    ],</div><div class="line"></div><div class="line">    <span class="attr">"contributes"</span>: &#123;</div><div class="line">        <span class="attr">"breakpoints"</span>: [</div><div class="line">            &#123;</div><div class="line">                <span class="attr">"language"</span>: <span class="string">"markdown"</span></div><div class="line">            &#125;</div><div class="line">        ],</div><div class="line">        <span class="attr">"debuggers"</span>: [&#123;</div><div class="line">            <span class="attr">"type"</span>: <span class="string">"mock"</span>,</div><div class="line">            <span class="attr">"label"</span>: <span class="string">"Mock Debug"</span>,</div><div class="line"></div><div class="line">            <span class="attr">"program"</span>: <span class="string">"./out/mockDebug.js"</span>,</div><div class="line">            <span class="attr">"runtime"</span>: <span class="string">"node"</span>,</div><div class="line"></div><div class="line">            <span class="attr">"configurationAttributes"</span>: &#123;</div><div class="line">                <span class="attr">"launch"</span>: &#123;</div><div class="line">                    <span class="attr">"required"</span>: [<span class="string">"program"</span>],</div><div class="line">                    <span class="attr">"properties"</span>: &#123;</div><div class="line">                        <span class="attr">"program"</span>: &#123;</div><div class="line">                            <span class="attr">"type"</span>: <span class="string">"string"</span>,</div><div class="line">                            <span class="attr">"description"</span>: <span class="string">"Absolute path to a text file."</span>,</div><div class="line">                            <span class="attr">"default"</span>: <span class="string">"$&#123;workspaceRoot&#125;/readme.md"</span></div><div class="line">                        &#125;,</div><div class="line">                        <span class="attr">"stopOnEntry"</span>: &#123;</div><div class="line">                            <span class="attr">"type"</span>: <span class="string">"boolean"</span>,</div><div class="line">                            <span class="attr">"description"</span>: <span class="string">"Automatically stop after launch."</span>,</div><div class="line">                            <span class="attr">"default"</span>: <span class="literal">true</span></div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;,</div><div class="line"></div><div class="line">            <span class="attr">"initialConfigurations"</span>: [</div><div class="line">                &#123;</div><div class="line">                    <span class="attr">"type"</span>: <span class="string">"mock"</span>,</div><div class="line">                    <span class="attr">"name"</span>: <span class="string">"Mock Debug"</span>,</div><div class="line">                    <span class="attr">"request"</span>: <span class="string">"launch"</span>,</div><div class="line">                    <span class="attr">"program"</span>: <span class="string">"readme.md"</span>,</div><div class="line">                    <span class="attr">"stopOnEntry"</span>: <span class="literal">true</span></div><div class="line">                &#125;</div><div class="line">            ],</div><div class="line"></div><div class="line">            <span class="attr">"configurationSnippets"</span>: [</div><div class="line">                &#123;</div><div class="line">                    <span class="attr">"label"</span>: <span class="string">"Mock Debug: Launch"</span>,</div><div class="line">                    <span class="attr">"description"</span>: <span class="string">"A new configuration for launching a mock debug program"</span>,</div><div class="line">                    <span class="attr">"body"</span>: &#123;</div><div class="line">                        <span class="attr">"type"</span>: <span class="string">"mock"</span>,</div><div class="line">                        <span class="attr">"request"</span>: <span class="string">"launch"</span>,</div><div class="line">                        <span class="attr">"name"</span>: <span class="string">"$&#123;2:Launch Program&#125;"</span>,</div><div class="line">                        <span class="attr">"program"</span>: <span class="string">"^\"\\$&#123;workspaceRoot&#125;/$&#123;1:Program&#125;\""</span></div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            ],</div><div class="line"></div><div class="line">            <span class="attr">"variables"</span>: &#123;</div><div class="line">                <span class="attr">"AskForProgramName"</span>: <span class="string">"extension.mock-debug.getProgramName"</span></div><div class="line">            &#125;</div><div class="line">        &#125;]</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>Now take a look at the <strong>contributes</strong> section which contains the contributions specific to debug extensions.</p><p>First we use the <strong>breakpoints</strong> contribution point to list the languages for which setting breakpoints will be enabled.</p><p>Next is the <strong>debuggers</strong> section. Here one debugger is introduced under a (unique) debug <strong>type</strong> <code>mock</code>. The user can reference this type in his launch configurations. The optional attribute <strong>label</strong> can be used to give the debug type a nicer name when showing it in the UI.</p><p>Since the debug extension uses a debug adapter, a relative path to this is given as the <strong>program</strong> attribute.<br>In order to make the extension self-contained the application must live inside the extension folder.<br>By convention we keep this applications inside a folder named <code>out</code> or <code>bin</code> but you are free to use a different name.</p><p>Since VS Code runs on different platforms, we have to make sure that the debug adapter program supports the different platforms as well. For this we have the following options:</p><ol><li><p>If the program is implemented in a platform independent way, e.g. as program that runs on a runtime that is available on all supported platforms, you can specify this runtime via the <strong>runtime</strong> attribute. As of today, VS Code supports <code>node</code> and <code>mono</code> runtimes. Our Mock Debug adapter from above uses this approach.</p></li><li><p>If your debug adapter implementation needs different executables on different platforms, the <strong>program</strong> attribute can be qualified for specific platforms like this:</p><figure class="highlight"><table><tr><td class="code"><pre><div class="line">"debuggers": [&#123;</div><div class="line">    "type": "gdb",</div><div class="line">    "windows": &#123;</div><div class="line">        "program": "./bin/gdbDebug.exe",</div><div class="line">    &#125;,</div><div class="line">    "osx": &#123;</div><div class="line">        "program": "./bin/gdbDebug.sh",</div><div class="line">    &#125;,</div><div class="line">    "linux": &#123;</div><div class="line">        "program": "./bin/gdbDebug.sh",</div><div class="line">    &#125;</div><div class="line">&#125;]</div></pre></td></tr></table></figure></li><li><p>A combination of both approaches is possible too. The following example is from the Mono Debug adapter which is implemented as a mono application that needs a runtime on OS X and Linux but not on Windows:</p><figure class="highlight"><table><tr><td class="code"><pre><div class="line">"debuggers": [&#123;</div><div class="line">    "type": "mono",</div><div class="line">    "program": "./bin/monoDebug.exe",</div><div class="line">    "osx": &#123;</div><div class="line">        "runtime": "mono"</div><div class="line">    &#125;,</div><div class="line">    "linux": &#123;</div><div class="line">        "runtime": "mono"</div><div class="line">    &#125;</div><div class="line">&#125;]</div></pre></td></tr></table></figure></li></ol><p><strong>configurationAttributes</strong> represents the schema for the <code>launch.json</code> attributes that are available for this debugger. This schema is used for validating the <code>launch.json</code> and supporting IntelliSense and hover help when editing the launch configuration.</p><p><strong>initialConfigurations</strong> defines the initial content of the default <code>launch.json</code> for this debugger. This information is used when a project does not have a <code>launch.json</code> and a user starts a debug session or clicks on the gear icon in the debug viewlet. In this case VS Code lets the user pick a debugger from the list of all debuggers and then creates the corresponding <code>launch.json</code>:</p><p><img src="images/example-debuggers/debug-init-config.png" alt="Debugger Quickpick"></p><p>Instead of defining the initial content of the <code>launch.json</code> statically in the <code>package.json</code> it is possible to ‘compute’ the initial content with a command that is implemented in the extension.</p><p>In this case the value for the <code>initialConfigurations</code> attribute must be set to a command ID:</p><figure class="highlight"><table><tr><td class="code"><pre><div class="line">// ...</div><div class="line">"initialConfigurations": "extension.mock-debug.provideInitialConfigurations",</div><div class="line">// ...</div></pre></td></tr></table></figure><p>And the implementation of this command lives in <code>src/extension.ts</code> and returns the content for the <code>launch.json</code> as a string (which makes it possible to include comments and precisely control the formatting):</p><figure class="highlight ts"><table><tr><td class="code"><pre><div class="line"><span class="keyword">const</span> initialConfigurations = &#123;</div><div class="line">    version: <span class="string">'0.2.0'</span>,</div><div class="line">    configurations: [</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">type</span>: <span class="string">'mock'</span>,</div><div class="line">            request: <span class="string">'launch'</span>,</div><div class="line">            name: <span class="string">'Mock Debug'</span>,</div><div class="line">            program: <span class="string">'$&#123;workspaceRoot&#125;/readme.md'</span>,</div><div class="line">            stopOnEntry: <span class="literal">true</span></div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">&#125;;</div><div class="line"></div><div class="line">vscode.commands.registerCommand(<span class="string">'extension.mock-debug.provideInitialConfigurations'</span>, () =&gt; &#123;</div><div class="line">    <span class="keyword">return</span> [</div><div class="line">        <span class="string">'// Use IntelliSense to learn about possible Mock Debug attributes.'</span>,</div><div class="line">        <span class="string">'// Hover to view descriptions of existing attributes.'</span>,</div><div class="line">        <span class="built_in">JSON</span>.stringify(initialConfigurations, <span class="literal">null</span>, <span class="string">'\t'</span>)</div><div class="line">    ].join(<span class="string">'\n'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure><p><strong>configurationSnippets</strong> define launch configuration snippets that get surfaced in IntelliSense when editing the <code>launch.json</code>. The <code>label</code> attribute of a snippet is prefixed by the debugger name so that it can be clearly identified when presented in a list of all snippet proposals.</p><p>The <strong>variables</strong> contribution binds ‘variables’ to ‘commands’. These variables can be used in the launch configuration using the <strong>${command.Xxxx}</strong> syntax and the variables are substituted by the value returned from the bound command when a debug session is started.</p><p>The implementation of a command lives in the extension and it can range from a simple expression with no UI, to sophisticated functionality based on the UI features available in the extension API.<br>Mock Debug binds a variable <code>AskForProgramName</code> to the command <code>extension.mock-debug.getProgramName</code>. The implementation of this command in <code>src/extension.ts</code> uses the <code>showInputBox</code> to let the user enter a program name:<br></p><figure class="highlight ts"><table><tr><td class="code"><pre><div class="line">vscode.commands.registerCommand(<span class="string">'extension.mock-debug.getProgramName'</span>, config =&gt; &#123;</div><div class="line">    <span class="keyword">return</span> vscode.window.showInputBox(&#123;</div><div class="line">        placeHolder: <span class="string">"Please enter the name of a markdown file in the workspace folder"</span>,</div><div class="line">        value: <span class="string">"readme.md"</span></div><div class="line">    &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure><p></p><p>The variable can now be used in any string typed value of a launch configuration as <strong>${command.AskForProgramName}</strong>.</p><h2 id="Publishing-your-Debug-Adapter" class="article-heading"><a href="#Publishing-your-Debug-Adapter" class="headerlink" title="Publishing your Debug Adapter"></a>Publishing your Debug Adapter<a class="article-anchor" href="#Publishing-your-Debug-Adapter" aria-hidden="true"></a></h2><p>Once you have created your debug adapter you can publish it to the Marketplace:</p><ul><li>update the attributes in the <code>package.json</code> to reflect the naming and purpose of your debug adapter.</li><li>upload to the Marketplace as described in <a href="/docs/extensions/publish-extension.html">Share an Extension</a> section.</li></ul></div><footer class="article-footer"><time class="article-updated" datetime="2017-03-23T12:45:32.502Z" itemprop="dateModified">Last updated: 2017-03-23</time></footer></div></div><aside id="article-toc" role="navigation"><div id="article-toc-inner"><strong class="sidebar-title">Contents</strong><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Example-Debuggers"><span class="toc-text">Example - Debuggers</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Mock-Debug-Extension"><span class="toc-text">The Mock Debug Extension</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Development-Setup-for-Mock-Debug"><span class="toc-text">Development Setup for Mock Debug</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Anatomy-of-the-package-json-of-a-Debug-Extension"><span class="toc-text">Anatomy of the package.json of a Debug Extension</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Publishing-your-Debug-Adapter"><span class="toc-text">Publishing your Debug Adapter</span></a></li></ol></li></ol><a href="#" id="article-toc-top">Back to Top</a></div></aside></div></article><aside id="sidebar" role="navigation"><div class="inner"><div class="accordion"><label class="sidebar-title" for="Setup">Setup<i></i></label><input id="Setup" type="checkbox"><div class="ac-cont"><a href="/docs/setup/setup-overview.html" class="sidebar-link">Overview</a><a href="/docs/setup/linux.html" class="sidebar-link">Linux</a><a href="/docs/setup/windows.html" class="sidebar-link">Windows</a><a href="/docs/setup/additional-components.html" class="sidebar-link">Additional Compnents</a></div><label class="sidebar-title" for="GetStarted">GetStarted<i></i></label><input id="GetStarted" type="checkbox"><div class="ac-cont"><a href="/docs/getstarted/introvideos.html" class="sidebar-link">Intro Videos</a><a href="/docs/getstarted/themes.html" class="sidebar-link">Themes</a><a href="/docs/getstarted/settings.html" class="sidebar-link">Settings</a><a href="/docs/getstarted/keybindings.html" class="sidebar-link">Key Bindings</a><a href="/docs/getstarted/locales.html" class="sidebar-link">Display Language</a></div><label class="sidebar-title" for="UserGuide">UserGuide<i></i></label><input id="UserGuide" type="checkbox"><div class="ac-cont"><a href="/docs/userguide/intellisense.html" class="sidebar-link">IntelliSense</a><a href="/docs/userguide/versioncontrol.html" class="sidebar-link">Version Control</a><a href="/docs/userguide/userdefinedsnippets.html" class="sidebar-link">Creating your own Snippets</a><a href="/docs/userguide/command-line.html" class="sidebar-link">Command Line</a><a href="/docs/userguide/accessibility.html" class="sidebar-link">Accessibility</a></div><label class="sidebar-title" for="Languages">Languages<i></i></label><input id="Languages" type="checkbox"><div class="ac-cont"><a href="/docs/languages/overview.html" class="sidebar-link">Overview</a><a href="/docs/languages/css.html" class="sidebar-link">CSS, Sass and Less</a><a href="/docs/languages/cpp.html" class="sidebar-link">C++</a></div><label class="sidebar-title" for="Extensions">Extensions<i></i></label><input id="Extensions" type="checkbox" checked><div class="ac-cont"><a href="/docs/extensions/overview.html" class="sidebar-link">Overview</a></div><label class="sidebar-title" for="ExtensionAPI">ExtensionAPI<i></i></label><input id="ExtensionAPI" type="checkbox"><div class="ac-cont"><a href="/docs/extensionAPI/overview.html" class="sidebar-link">Overview</a></div><label class="sidebar-title" for="Supporting">Supporting<i></i></label><input id="Supporting" type="checkbox"><div class="ac-cont"><a href="/docs/supporting/faq.html" class="sidebar-link">FAQ</a><a href="/docs/supporting/requirements.html" class="sidebar-link">Requirements</a></div><label class="sidebar-title" for="Other">Other<i></i></label><input id="Other" type="checkbox"><div class="ac-cont"><a href="/docs/other/dotnet.html" class="sidebar-link">.NET Core</a></div></div></div></aside></div></div></div></div><div id="mobile-nav-dimmer"></div><nav id="mobile-nav"><div id="mobile-nav-inner"><ul id="mobile-nav-list"><a href="/docs/" class="mobile-nav-link">Docs</a><a href="/updates/" class="mobile-nav-link">Updates</a></ul><strong class="mobile-nav-title">Setup</strong><a href="/docs/setup/setup-overview.html" class="mobile-nav-link">Overview</a><a href="/docs/setup/linux.html" class="mobile-nav-link">Linux</a><a href="/docs/setup/windows.html" class="mobile-nav-link">Windows</a><a href="/docs/setup/additional-components.html" class="mobile-nav-link">Additional Compnents</a><strong class="mobile-nav-title">GetStarted</strong><a href="/docs/getstarted/introvideos.html" class="mobile-nav-link">Intro Videos</a><a href="/docs/getstarted/themes.html" class="mobile-nav-link">Themes</a><a href="/docs/getstarted/settings.html" class="mobile-nav-link">Settings</a><a href="/docs/getstarted/keybindings.html" class="mobile-nav-link">Key Bindings</a><a href="/docs/getstarted/locales.html" class="mobile-nav-link">Display Language</a><strong class="mobile-nav-title">UserGuide</strong><a href="/docs/userguide/intellisense.html" class="mobile-nav-link">IntelliSense</a><a href="/docs/userguide/versioncontrol.html" class="mobile-nav-link">Version Control</a><a href="/docs/userguide/userdefinedsnippets.html" class="mobile-nav-link">Creating your own Snippets</a><a href="/docs/userguide/command-line.html" class="mobile-nav-link">Command Line</a><a href="/docs/userguide/accessibility.html" class="mobile-nav-link">Accessibility</a><strong class="mobile-nav-title">Languages</strong><a href="/docs/languages/overview.html" class="mobile-nav-link">Overview</a><a href="/docs/languages/css.html" class="mobile-nav-link">CSS, Sass and Less</a><a href="/docs/languages/cpp.html" class="mobile-nav-link">C++</a><strong class="mobile-nav-title">Extensions</strong><a href="/docs/extensions/overview.html" class="mobile-nav-link">Overview</a><strong class="mobile-nav-title">ExtensionAPI</strong><a href="/docs/extensionAPI/overview.html" class="mobile-nav-link">Overview</a><strong class="mobile-nav-title">Supporting</strong><a href="/docs/supporting/faq.html" class="mobile-nav-link">FAQ</a><a href="/docs/supporting/requirements.html" class="mobile-nav-link">Requirements</a><strong class="mobile-nav-title">Other</strong><a href="/docs/other/dotnet.html" class="mobile-nav-link">.NET Core</a></div></nav><a id="scroll-to-top" role="button" aria-label="scroll to top" onclick="container.scrollTop=0"><span class="icon"></span></a><script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script><script src="/js/toc.js"></script><script src="/js/mobile_nav.js"></script><script src="/js/plugins.js"></script></body></html>