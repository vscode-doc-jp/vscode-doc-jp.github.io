<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8"><title>タスク | VS Code Docs</title><meta name="description" content="Visual Studio Code (VS Code) Docs の日本語訳"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://vscode-doc-jp.github.io/docs/userguide/tasks.html"><link rel="stylesheet" href="/css/navy.css"><link rel="stylesheet" href="/css/accordion.css"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"><link rel="alternate" href="/atom.xml" title="VS Code Docs"><script>!function(e,t,a,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=t.createElement(a),s=t.getElementsByTagName(a)[0],o.async=1,o.src="https://www.google-analytics.com/analytics.js",s.parentNode.insertBefore(o,s)}(window,document,"script",0,"ga"),ga("create","UA-92801937-1","auto"),ga("send","pageview")</script></head><body><div id="container"><header id="header" class="wrapper"><div id="header-inner" class="inner"><h1 id="logo-wrap"><a href="/" id="logo">Visual Studio Code</a></h1><nav id="main-nav"><a href="/docs/" class="main-nav-link">Docs</a><a href="/updates/" class="main-nav-link">Updates</a><div id="search-input-wrap"><div id="search-input-icon"><i class="fa fa-search"></i></div><input type="search" id="search-input" placeholder="Search..."></div></nav><a id="mobile-nav-toggle"><span class="mobile-nav-toggle-bar"></span> <span class="mobile-nav-toggle-bar"></span> <span class="mobile-nav-toggle-bar"></span></a></div></header><div id="content-wrap"><div id="content" class="wrapper"><div id="content-inner"><header role="navigation"><div class="inner"><nav class="small_nav"><h4>Topics</h4><form name="SmallNav"><select class="small_nav_dropdown" name="doropdown" onchange="location.href=document.SmallNav.doropdown.options[document.SmallNav.doropdown.selectedIndex].value"><optgroup class="small-nav-title" label="Setup"><option value="/docs/setup/setup-overview.html" class="small-nav-link" undefined>Overview</option><option value="/docs/setup/linux.html" class="small-nav-link" undefined>Linux</option><option value="/docs/setup/windows.html" class="small-nav-link" undefined>Windows</option><option value="/docs/setup/additional-components.html" class="small-nav-link" undefined>Additional Compnents</option></optgroup><optgroup class="small-nav-title" label="GetStarted"><option value="/docs/getstarted/introvideos.html" class="small-nav-link" undefined>Intro Videos</option><option value="/docs/getstarted/userinterface.html" class="small-nav-link" undefined>User Interface</option><option value="/docs/getstarted/themes.html" class="small-nav-link" undefined>Themes</option><option value="/docs/getstarted/settings.html" class="small-nav-link" undefined>Settings</option><option value="/docs/getstarted/keybindings.html" class="small-nav-link" undefined>Key Bindings</option><option value="/docs/getstarted/locales.html" class="small-nav-link" undefined>Display Language</option></optgroup><optgroup class="small-nav-title" label="UserGuide"><option value="/docs/userguide/codebasics.html" class="small-nav-link" undefined>Basic Editing</option><option value="/docs/userguide/intellisense.html" class="small-nav-link" undefined>IntelliSense</option><option value="/docs/userguide/editingevolved.html" class="small-nav-link" undefined>Code Navigation</option><option value="/docs/userguide/versioncontrol.html" class="small-nav-link" undefined>Version Control</option><option value="/docs/userguide/tasks.html" class="small-nav-link selected" undefined selected>Tasks</option><option value="/docs/userguide/userdefinedsnippets.html" class="small-nav-link" undefined>Creating your own Snippets</option><option value="/docs/userguide/command-line.html" class="small-nav-link" undefined>Command Line</option><option value="/docs/userguide/accessibility.html" class="small-nav-link" undefined>Accessibility</option></optgroup><optgroup class="small-nav-title" label="Languages"><option value="/docs/languages/overview.html" class="small-nav-link" undefined>Overview</option><option value="/docs/languages/html.html" class="small-nav-link" undefined>HTML</option><option value="/docs/languages/css.html" class="small-nav-link" undefined>CSS, Sass and Less</option><option value="/docs/languages/cpp.html" class="small-nav-link" undefined>C++</option></optgroup><optgroup class="small-nav-title" label="Extensions"><option value="/docs/extensions/overview.html" class="small-nav-link" undefined>Overview</option><option value="/docs/extensions/yocode.html" class="small-nav-link" undefined>Extension Generator</option><option value="/docs/extensions/samples.html" class="small-nav-link" undefined>Additional Examples</option><option value="/docs/extensions/publish-extension.html" class="small-nav-link" undefined>Publishing Extensions</option></optgroup><optgroup class="small-nav-title" label="ExtensionAPI"><option value="/docs/extensionapi/overview.html" class="small-nav-link" undefined>Overview</option><option value="/docs/extensionapi/extension-manifest.html" class="small-nav-link" undefined>Extension Manifest</option><option value="/docs/extensionapi/extension-points.html" class="small-nav-link" undefined>Extension Points</option><option value="/docs/extensionapi/activation-events.html" class="small-nav-link" undefined>Activation Events</option><option value="/docs/extensionapi/vscode-api-commands.html" class="small-nav-link" undefined>Complex Commands</option><option value="/docs/extensionapi/api-scm.html" class="small-nav-link" undefined>Source Control API</option></optgroup><optgroup class="small-nav-title" label="Supporting"><option value="/docs/supporting/faq.html" class="small-nav-link" undefined>FAQ</option><option value="/docs/supporting/requirements.html" class="small-nav-link" undefined>Requirements</option><option value="/docs/supporting/errors.html" class="small-nav-link" undefined>Errors</option></optgroup><optgroup class="small-nav-title" label="Other"><option value="/docs/other/dotnet.html" class="small-nav-link" undefined>.NET Core</option></optgroup></select></form></nav></div></header><article class="article-container" itemscope itemtype="http://schema.org/Article"><div class="article-inner"><div class="article"><div class="inner"><header class="article-header"><h1 class="article-title" itemprop="name">タスク</h1><a href="https://github.com/vscode-doc-jp/Docs/edit/master/userguide/tasks.md" class="article-edit-link" title="Improve this doc"><i class="fa fa-pencil"></i></a><h2><time class="article-updated" data-position="header" datetime="2017-07-12T08:08:47.561Z" itemprop="dateModified">Last updated: 2017-07-12</time></h2><strong class="article-updated" data-description="status">一定の基準より情報が古いコンテンツ</strong></header><div class="article-content" itemprop="articleBody"><h1 id="タスクを利用して外部ツールと統合する" class="article-heading"><a href="#タスクを利用して外部ツールと統合する" class="headerlink" title="タスクを利用して外部ツールと統合する "></a>タスクを利用して外部ツールと統合する <a id="integrate-with-external-tools-via-tasks"></a><a class="article-anchor" href="#タスクを利用して外部ツールと統合する" aria-hidden="true"></a></h1><p>ビルド、パッケージング、テストやソフトウェアのシステム構築などのタスクを自動化するツールが多数存在します。いわゆる <a href="https://en.wikipedia.org/wiki/Make_software" target="_blank" rel="external">Make</a>, <a href="https://ant.apache.org/" target="_blank" rel="external">Ant</a>, <a href="http://gulpjs.com/" target="_blank" rel="external">Gulp</a>, <a href="http://jakejs.com/" target="_blank" rel="external">Jake</a>, <a href="http://rake.rubyforge.org/" target="_blank" rel="external">Rake</a>, <a href="https://github.com/Microsoft/msbuild" target="_blank" rel="external">MSBuild</a>のことです。</p><p><img src="images/tasks/tasks_hero.png" alt="VS Code can talk to a variety of external tools"></p><p>これらのツールは主にコマンドラインから実行され、ソフトウェア開発(編集 コンパイル テスト デバッグ)以外のジョブを自動化します。開発ライフサイクルにおけるこれらの重要性を考えると、VS Codeから実行してその結果を分析できることはとても便利だといえます。</p><blockquote><p><strong>Note:</strong> タスクはワークスペースフォルダー上で作業している場合にのみ使用できます。つまり、一つのファイルを編集時は使用できません。</p></blockquote><h2 id="Hello-World" class="article-heading"><a href="#Hello-World" class="headerlink" title="Hello World "></a>Hello World <a id="hello-world"></a><a class="article-anchor" href="#Hello-World" aria-hidden="true"></a></h2><p>実行時に<strong>出力</strong>パネルにテキストを表示する、単純な”Hello World”タスクから始めてみましょう。</p><p><code>tasks.json</code>ファイルはワークスペース内で定義可能で、VS Codeは一般的なタスクのテンプレートを用意しています。<strong>コマンドパレット</strong>(<span class="dynamic-keybinding" data-osx="⇧⌘P" data-win="Ctrl+Shift+P" data-linux="Ctrl+Shift+P"><span class="keybinding">⇧⌘P</span> (Windows, Linux <span class="keybinding">Ctrl+Shift+P</span>)</span>)では、<code>task</code>でフィルターをかけて、タスクに関連するコマンドを確認できます。</p><p><img src="images/tasks/tasks-command-palette.png" alt="tasks in command palette"></p><p>まず<strong>Tasks: Configure Task Runner</strong>コマンドを選択して、テンプレートのリストを表示します。次に、外部コマンドを実行する<strong>Others</strong>を選択してください。</p><p>ワークスペースの<code>.vscode</code>フォルダに<code>tasks.json</code>ファイルが次の内容で表示されるはずです:</p><figure class="highlight json"><table><tr><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"version"</span>: <span class="string">"0.1.0"</span>,</div><div class="line">    <span class="attr">"command"</span>: <span class="string">"echo"</span>,</div><div class="line">    <span class="attr">"isShellCommand"</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">"args"</span>: [<span class="string">"Hello World"</span>],</div><div class="line">    <span class="attr">"showOutput"</span>: <span class="string">"always"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><p>今回の例では”Hello World”を引数として、シェルコマンド<code>echo</code>を実行していきます。</p><p>タスク<code>echo</code>をテストしてみましょう。<strong>Tasks: Run Task</strong>を実行して、ドロップダウンから<code>echo</code>を選択してください。<strong>出力</strong>パネルが開き、”Hello World”というテキストを確認できます。</p><p><code>tasks.json</code>ではIntelliSenseを利用可能です。変数とその値にホバーして<span class="dynamic-keybinding" data-osx="⌃Space" data-win="Ctrl+Space" data-linux="Ctrl+Space"><span class="keybinding">⌃Space</span> (Windows, Linux <span class="keybinding">Ctrl+Space</span>)</span>でトリガーできます。</p><p><img src="images/tasks/tasks-intellisense.png" alt="tasks IntelliSense"></p><blockquote><p><strong>Tip:</strong> <strong>Quick Open</strong>(<span class="dynamic-keybinding" data-osx="⌘P" data-win="Ctrl+P" data-linux="Ctrl+P"><span class="keybinding">⌘P</span> (Windows, Linux <span class="keybinding">Ctrl+P</span>)</span>)で”`task``kbstyle(Space)<commandname>“と入力すればタスクを実行できます。今回の場合は ‘task echo’です。</commandname></p></blockquote><h2 id="出力ウィンドウの動作" class="article-heading"><a href="#出力ウィンドウの動作" class="headerlink" title="出力ウィンドウの動作 "></a>出力ウィンドウの動作 <a id="output-window-behavior"></a><a class="article-anchor" href="#出力ウィンドウの動作" aria-hidden="true"></a></h2><p>場合によっては、タスクを実行時に出力ウィンドウの動作を制御したいこと思うことでしょう。たとえば、タスクに問題があるときは、エディターを最大化して、タスク出力ウィンドウのみを表示したいと思うかもしれません。<strong>showOutput</strong>プロパティはこれを制御できます。有効な値は次の通りです:</p><ul><li><strong>always</strong> - 出力ウィンドウを常に前面表示します。(既定)。</li><li><strong>never</strong> - ユーザーが <strong>表示</strong> &gt; <strong>出力</strong>(<span class="dynamic-keybinding" data-osx="⇧⌘U" data-win="Ctrl+Shift+U" data-linux="Ctrl+K Ctrl+H"><span class="keybinding">⇧⌘U</span> (Windows <span class="keybinding">Ctrl+Shift+U</span>, Linux <span class="keybinding">Ctrl+K Ctrl+H</span>)</span>) を実行して出力ウィンドウを開くまで確認できません。</li><li><strong>silent</strong> - タスクに<a href="/docs/userguide/tasks.html#processing-task-output-with-problem-matchers">問題マッチャー</a>が設定されていない場合にのみ、出力ウィンドウを全面に表示します。</li></ul><h3 id="echoCommand" class="article-heading"><a href="#echoCommand" class="headerlink" title="echoCommand"></a>echoCommand<a class="article-anchor" href="#echoCommand" aria-hidden="true"></a></h3><p>VS Codeが実行している正確なコマンドを確認するには、<code>tasks.json</code>内の<code>echoCommand</code>設定を有効にします:</p><p><img src="images/tasks/tasks-echoCommand.png" alt="tasks echoCommand"></p><blockquote><p><strong>Note:</strong>VS Codeにはnpm、MSBuild、mavenおよびその他のコマンドラインを実行するために、定義済みの<code>tasks.json</code>テンプレートが同梱されています。タスクについて学習したいならこのテンプレートを確認し、使用している他のツールに類似したツールやタスクランナーを確認することが最適です。</p></blockquote><h2 id="command-and-tasks" class="article-heading"><a href="#command-and-tasks" class="headerlink" title="command and tasks[]"></a>command and tasks[]<a class="article-anchor" href="#command-and-tasks" aria-hidden="true"></a></h2><p><code>tasks.json</code>は単一の<code>command</code>値をとります。この値はGuplやGruntといったタスクランナーや、任意のコマンドラインツール(コンパイラーやlinter)の値になります。既定で<code>command</code>は、<strong>Tasks: Run Task</strong>のドロップダウンに利用されます。</p><p>また<code>tasks</code>配列に複数のタスクを定義して、異なる引数を渡したり<code>command</code>を実行したときに異なる設定を使うこともできます。</p><p>次は、異なる引数を<code>echo</code>コマンドに渡す簡単な例です:</p><figure class="highlight json"><table><tr><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"version"</span>: <span class="string">"0.1.0"</span>,</div><div class="line">    <span class="attr">"command"</span>: <span class="string">"echo"</span>,</div><div class="line">    <span class="attr">"isShellCommand"</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">"args"</span>: [],</div><div class="line">    <span class="attr">"showOutput"</span>: <span class="string">"always"</span>,</div><div class="line">    <span class="attr">"echoCommand"</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">"suppressTaskName"</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">"tasks"</span>: [</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"taskName"</span>: <span class="string">"hello"</span>,</div><div class="line">            <span class="attr">"args"</span>: [<span class="string">"Hello World"</span>]</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"taskName"</span>: <span class="string">"bye"</span>,</div><div class="line">            <span class="attr">"args"</span>: [<span class="string">"Good Bye"</span>]</div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>いま<strong>Tasks: Run Task</strong>を実行すれば、ドロップダウンに<code>hello</code>と<code>bye</code>という2つのタスクが確認できます。私たちは<code>suppressTaskName</code>をtrueに設定しました。これによりタスク名もコマンドに渡されます。結果は”echo hello Hello World”になるでしょう。</p><p><img src="images/tasks/tasks-array.png" alt="tasks array"></p><p><code>showOutput</code>や<code>suppressTaskName</code>は、グローバルに設定したり特定のタスクで上書きしたりすることが可能です。<code>tasks args</code>プロパティ値はグローバル変数に追加されます。その結果のコマンドラインは次の通りです:</p><ul><li><code>suppressTaskName</code>が<code>true</code>: <code>command &#39;global args&#39; &#39;task args&#39;</code></li><li><code>suppressTaskName</code>が<code>false</code>:<code>command &#39;global args&#39; taskName &#39;task args&#39;</code></li></ul><p><code>tasks</code>固有のプロパティもあります。便利なプロパティの1つは<code>isBuildCommand</code>です。これをtrueに設定すると、<strong>Tasks: Run Build Task</strong> (<span class="dynamic-keybinding" data-osx="⇧⌘B" data-win="Ctrl+Shift+B" data-linux="Ctrl+Shift+B"><span class="keybinding">⇧⌘B</span> (Windows, Linux <span class="keybinding">Ctrl+Shift+B</span>)</span>)を実行しただけでそのタスクを実行します。</p><h2 id="複数のコマンドを実行" class="article-heading"><a href="#複数のコマンドを実行" class="headerlink" title="複数のコマンドを実行 "></a>複数のコマンドを実行 <a id="running-multiple-commands"></a><a class="article-anchor" href="#複数のコマンドを実行" aria-hidden="true"></a></h2><p>複数の異なるコマンドを実行したいとき、タスクごとに異なるコマンドを指定することが可能です。タスクごとにコマンドを使用するときの<code>tasks.json</code>ファイルは次のようになります:</p><figure class="highlight json"><table><tr><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"version"</span>: <span class="string">"0.1.0"</span>,</div><div class="line">    <span class="attr">"tasks"</span>: [</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"taskName"</span>: <span class="string">"tsc"</span>,</div><div class="line">            <span class="attr">"command"</span>: <span class="string">"tsc"</span>,</div><div class="line">            <span class="attr">"args"</span>: [<span class="string">"-w"</span>],</div><div class="line">            <span class="attr">"isShellCommand"</span>: <span class="literal">true</span>,</div><div class="line">            <span class="attr">"isBackground"</span>: <span class="literal">true</span>,</div><div class="line">            <span class="attr">"problemMatcher"</span>: <span class="string">"$tsc-watch"</span></div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"taskName"</span>: <span class="string">"build"</span>,</div><div class="line">            <span class="attr">"command"</span>: <span class="string">"gulp"</span>,</div><div class="line">            <span class="attr">"args"</span>: [<span class="string">"build"</span>],</div><div class="line">            <span class="attr">"isShellCommand"</span>: <span class="literal">true</span></div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>1つ目のタスクはwatchモードでTypeScriptコンパイラーを開始し、2番目のタスクはgulpのビルドを開始します。タスクがローカルコマンドを指定すると、実行時にタスク名はコマンドラインに含まれません(<code>suppressTaskName</code>は既定で<code>true</code>です)。ローカルのコマンドはローカル引数を指定できるので、既定ではそれを追加する必要はありません。もし<code>tasks.json</code>ファイルがグローバルとタスクのローカルコマンドの両方を指定するなら、タスクのローカルコマンドが優先されます。つまり、グローバルコマンドとタスクのローカルコマンドは一緒になることがないのです。</p><h2 id="タスクにキーボードショートカットをバインド" class="article-heading"><a href="#タスクにキーボードショートカットをバインド" class="headerlink" title="タスクにキーボードショートカットをバインド "></a>タスクにキーボードショートカットをバインド <a id="binding-keyboard-shortcuts-totasks"></a><a class="article-anchor" href="#タスクにキーボードショートカットをバインド" aria-hidden="true"></a></h2><p>タスクを頻繁に実行する必要があるとき、タスクのキーボードショートカットを定義することもできます。</p><p>たとえば<code>ctrl+h</code>を<code>build</code>に上書きするバインドなら、<code>keybindings.json</code>に次を追加します:</p><figure class="highlight json"><table><tr><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"key"</span>: <span class="string">"ctrl+h"</span>,</div><div class="line">    <span class="attr">"command"</span>: <span class="string">"workbench.action.tasks.runTask"</span>,</div><div class="line">    <span class="attr">"args"</span>: <span class="string">"build"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="変数置換-変数" class="article-heading"><a href="#変数置換-変数" class="headerlink" title="変数置換 (変数) "></a>変数置換 (変数) <a id="variable-substitution"></a><a class="article-anchor" href="#変数置換-変数" aria-hidden="true"></a></h2><p>タスクを構成するとき、事前に定義された共通変数を利用すると便利なことがよくあります。VS Codeは<code>tasks.json</code>ファイル内で文字列の変数置換をサポートしており、次の定義された変数を持っています:</p><ul><li><strong>${workspaceRoot}</strong> VS Codeで開いたフォルダーのパス</li><li><strong>${workspaceRootFolderName}</strong> VS Codeで開いたスラッシュ(/)を含まないフォルダーの名前</li><li><strong>${file}</strong> 現在開いているファイル</li><li><strong>${relativeFile}</strong> <code>workspaceRoot</code>と相対的な現在開いているファイル</li><li><strong>${fileBasename}</strong> 現在開いているファイルのベース名</li><li><strong>${fileBasenameNoExtension}</strong> 現在開いているファイルから拡張子を含まないファイルの名前</li><li><strong>${fileDirname}</strong> 現在開いているファイルのディレクトリ名</li><li><strong>${fileExtname}</strong> 現在開いているファイルの拡張子</li><li><strong>${cwd}</strong> タスクランナー起動時の現在の作業ディレクトリ</li><li><p><strong>${lineNumber}</strong> アクティブなファイルの現在選択されている行番号</p><p><strong>${env.Name}</strong>を利用して、環境変数を参照することもできます(例:${env.PATH})。環境変数のNAMEは必ず大文字と小文字を区別してください。例: <code>env.Path</code>(windows)</p></li></ul><p>次の例は、現在開いているファイルをTypeScriptのコンパイラーに渡す設定の例です。</p><figure class="highlight json"><table><tr><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"command"</span>: <span class="string">"tsc"</span>,</div><div class="line">    <span class="attr">"args"</span>: [<span class="string">"$&#123;file&#125;"</span>]</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="OS特有のプロパティ" class="article-heading"><a href="#OS特有のプロパティ" class="headerlink" title="OS特有のプロパティ "></a>OS特有のプロパティ <a id="operating-system-specific-properties"></a><a class="article-anchor" href="#OS特有のプロパティ" aria-hidden="true"></a></h2><p>タスクシステムは、OS固有の定義をサポートしています。これを行うには、<code>tasks.json</code>ファイルにOSのリテラル(名前)を書き込み、その中に対応するプロパティを指定します。</p><p>次の例は、Node.jsの実行可能ファイルの場所をコマンドとして使用する例であり、WindowsとLinuxで異なった扱い受けます:</p><figure class="highlight json"><table><tr><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"version"</span>: <span class="string">"0.1.0"</span>,</div><div class="line">    <span class="attr">"windows"</span>: &#123;</div><div class="line">        <span class="attr">"command"</span>: <span class="string">"C:\\Program Files\\nodejs\\node.exe"</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">"linux"</span>: &#123;</div><div class="line">        <span class="attr">"command"</span>: <span class="string">"/usr/bin/node"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>有効なプロパティは、Windowsでは<code>windows</code>、Linuxでは<code>linux</code>、Macでは<code>osx</code>です。OS特有のスコープで定義したプロパティは、グローバルスコープで定義するプロパティより優先されます。</p><p>例:</p><figure class="highlight json"><table><tr><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"version"</span>: <span class="string">"0.1.0"</span>,</div><div class="line">    <span class="attr">"showOutput"</span>: <span class="string">"never"</span>,</div><div class="line">    <span class="attr">"windows"</span>: &#123;</div><div class="line">        <span class="attr">"showOutput"</span>: <span class="string">"always"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>実行したタスクからの出力は、常に表示されるWindowsを除いて前面には表示しません。</p><p>タスクのローカルコマンドもまた同様に動作させることができます。構文はグローバルコマンドと同じです。OS固有の引数をコマンドに追加する例を次に示します:</p><figure class="highlight json"><table><tr><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"version"</span>: <span class="string">"0.1.0"</span>,</div><div class="line">    <span class="attr">"tasks"</span>: [</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"taskName"</span>: <span class="string">"build"</span>,</div><div class="line">            <span class="attr">"command"</span>: <span class="string">"gulp"</span>,</div><div class="line">            <span class="attr">"isShellCommand"</span>: <span class="literal">true</span>,</div><div class="line">            <span class="attr">"windows"</span>: &#123;</div><div class="line">                <span class="attr">"args"</span>: [<span class="string">"build"</span>, <span class="string">"win32"</span>]</div><div class="line">            &#125;,</div><div class="line">            <span class="attr">"linux"</span>: &#123;</div><div class="line">                <span class="attr">"args"</span>: [<span class="string">"build"</span>, <span class="string">"linux"</span>]</div><div class="line">            &#125;,</div><div class="line">            <span class="attr">"osx"</span>: &#123;</div><div class="line">                <span class="attr">"args"</span>: [<span class="string">"build"</span>, <span class="string">"osx"</span>]</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="実践的なタスクの例" class="article-heading"><a href="#実践的なタスクの例" class="headerlink" title="実践的なタスクの例 "></a>実践的なタスクの例 <a id="examples-of-tasks-in-action"></a><a class="article-anchor" href="#実践的なタスクの例" aria-hidden="true"></a></h2><p>タスクの機能を最大限活用するために、VS Codeのタスクを使用してlintやコンパイラーなどの外部ツールを統合する方法を次に示します:</p><h3 id="TypeScriptをJavaScriptに変換" class="article-heading"><a href="#TypeScriptをJavaScriptに変換" class="headerlink" title="TypeScriptをJavaScriptに変換"></a>TypeScriptをJavaScriptに変換<a class="article-anchor" href="#TypeScriptをJavaScriptに変換" aria-hidden="true"></a></h3><p><a href="/docs/languages/typescript.html#transpiling-typescript-into-javascript">TypeScriptトピック</a>では、TypeScriptをJavaScriptに変換し、VS Code内で関連するエラーを監視するタスクを作成する例を解説します。</p><h3 id="MarkdownをHTMLにコンパイル" class="article-heading"><a href="#MarkdownをHTMLにコンパイル" class="headerlink" title="MarkdownをHTMLにコンパイル"></a>MarkdownをHTMLにコンパイル<a class="article-anchor" href="#MarkdownをHTMLにコンパイル" aria-hidden="true"></a></h3><p>Markdownトピックでは、MarkdownをHTMLにコンパイルするための2つの例を解説しています。</p><ol><li><a href="/docs/languages/markdown.html#compiling-markdown-into-html">ビルドタスクを利用して手動のコンパイルを行う</a></li><li><a href="/docs/languages/markdown.html#automating-markdown-compilation">file watcherによるコンパイル手順の自動化</a></li></ol><h3 id="LessとSassをCSSへ変換" class="article-heading"><a href="#LessとSassをCSSへ変換" class="headerlink" title="LessとSassをCSSへ変換"></a>LessとSassをCSSへ変換<a class="article-anchor" href="#LessとSassをCSSへ変換" aria-hidden="true"></a></h3><p>CSSトピックでは、タスクを使用してCSSファイルを生成する方法の例を開設しています。</p><ol><li><a href="/docs/languages/css.html#transpiling-sass-and-less-into-css">ビルドタスクを利用して手動で変換を行う</a></li><li><a href="/docs/languages/css.html#automating-sassless-compilation">file watcherによるコンパイル手順の自動化</a></li></ol><h2 id="Gulp-Grunt-Jakeタスクの自動検出" class="article-heading"><a href="#Gulp-Grunt-Jakeタスクの自動検出" class="headerlink" title="Gulp, Grunt, Jakeタスクの自動検出"></a>Gulp, Grunt, Jakeタスクの自動検出<a class="article-anchor" href="#Gulp-Grunt-Jakeタスクの自動検出" aria-hidden="true"></a></h2><p>VS CodeはGulp、Grunt、Jakeファイルのタスクを自動検出できます。これにより、追加の構成を必要とせずにタスクリストにタスクを追加します(問題マッチャーを使用する必要がある場合を除きます )。</p><p>この例を具体的にするために、次の簡単なGulpファイルを使用してみましょう。これは、ビルドとデバッグの2つのタスクを定義しています。1つ目は<a href="http://www.mono-project.com/" target="_blank" rel="external">Mono</a>を使用してC#のコードをコンパイルします。2つ目はMonoデバッガのもとでMyAppを開始します。</p><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">"gulp"</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> program = <span class="string">"MyApp"</span>;</div><div class="line"><span class="keyword">var</span> port = <span class="number">55555</span>;</div><div class="line"></div><div class="line">gulp.task(<span class="string">'default'</span>, [<span class="string">'debug'</span>]);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'build'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> gulp</div><div class="line">        .src(<span class="string">'./**/*.cs'</span>)</div><div class="line">        .pipe(msc([<span class="string">'-fullpaths'</span>, <span class="string">'-debug'</span>, <span class="string">'-target:exe'</span>, <span class="string">'-out:'</span> + program]));</div><div class="line">&#125;);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'debug'</span>, [<span class="string">'build'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">done</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> mono.debug(&#123; <span class="attr">port</span>: port, <span class="attr">program</span>: program&#125;, done);</div><div class="line">&#125;);</div></pre></td></tr></table></figure><p><span class="dynamic-keybinding" data-osx="⇧⌘P" data-win="Ctrl+Shift+P" data-linux="Ctrl+Shift+P"><span class="keybinding">⇧⌘P</span> (Windows, Linux <span class="keybinding">Ctrl+Shift+P</span>)</span>をおし、<code>Run Task</code>に続けて<span class="keybinding">Enter</span>を入力すれば、利用可能なタスクの一覧を表示します。その中から選択して<span class="keybinding">Enter</span>で確定すれば、そのタスクを実行します。</p><p><img src="images/tasks/gulpautodetect.png" alt="Task list"></p><blockquote><p><strong>Note:</strong> Gulp、Grunt、Jakeの自動検出は、対応するファイル(例: <code>guplfile.js</code>)が開いているフォルダーのルートに存在する場合のみ機能します。</p></blockquote><h2 id="問題マッチャーによるタスク出力の処理" class="article-heading"><a href="#問題マッチャーによるタスク出力の処理" class="headerlink" title="問題マッチャーによるタスク出力の処理 "></a>問題マッチャーによるタスク出力の処理 <a id="processing-task-output-with-problem-matchers"></a><a class="article-anchor" href="#問題マッチャーによるタスク出力の処理" aria-hidden="true"></a></h2><p>VS Codeは問題マッチャーを利用して、タスクからの出力を処理することができます。次に標準の例を示します:</p><ul><li><strong>TypeScript</strong>: <code>$tsc</code>は出力のファイル名が開かれたフォルダーと相対的であることを前提としています。</li><li><strong>TypeScript Watch</strong>: <code>$tsc-watch</code>はwatchモードで実行されたとき、<code>tsc</code>コンパイラーから報告される問題と一致します。</li><li><strong>JSHint</strong>: <code>$jshint</code>はファイル名が絶対パスとして報告されることを前提としています。</li><li><strong>JSHint Stylish</strong>: <code>$jshint-stylish</code>はファイル名が絶対パスとして報告されることを前提としています。</li><li><strong>ESLint Compact</strong>: <code>$eslint-compact</code>は出力のファイル名が開かれたフォルダーと相対的であることを前提としています。</li><li><strong>ESLint Stylish</strong>: <code>$eslint-stylish</code> は出力のファイル名が開かれたフォルダーと相対的であることを前提としています。</li><li><strong>Go</strong>: <code>$go</code>は<code>go</code>コンパイラーから報告される問題と一致します。ファイル名は開いているファイルと相対であることを前提とします。</li><li><strong>CSharp and VB Compiler</strong>: <code>$mscompile</code>はファイル名が絶対パスとして報告されることを前提としています。</li><li><strong>Less</strong>: <code>$lessCompile</code>はファイル名が絶対パスとして報告されることを前提としています。</li></ul><p>問題マッチャーは既知の警告やエラー文字列を確認するために、タスクの出力テキストを解析して、エディターと問題パネルにインラインで報告します。問題マッチャーは、グローバルか特定タスクのエントリー内で設定できます。</p><p>また、独自の問題マッチャーも作成可能です。これについて後で解説していきます。</p><h2 id="Gulp-Grunt-Jake出力のマッピング" class="article-heading"><a href="#Gulp-Grunt-Jake出力のマッピング" class="headerlink" title="Gulp, Grunt, Jake出力のマッピング"></a>Gulp, Grunt, Jake出力のマッピング<a class="article-anchor" href="#Gulp-Grunt-Jake出力のマッピング" aria-hidden="true"></a></h2><p>タスクを実行するだけでなくもっと多くのことをしたい場合、<code>tasks.json</code>ファイル(ワークスペースの<code>.vscode</code>内)にタスクを構成する必要があります。たとえば、報告された問題をVS Code内で参照したり、<strong>Tasks: Run Build Task</strong>(<span class="dynamic-keybinding" data-osx="⇧⌘B" data-win="Ctrl+Shift+B" data-linux="Ctrl+Shift+B"><span class="keybinding">⇧⌘B</span> (Windows, Linux <span class="keybinding">Ctrl+Shift+B</span>)</span>)を使用してビルドタスクをトリガしたいと思ったときです。</p><p>ワークスペースの<code>.vscode</code>フォルダー内に<code>tasks.json</code>がまだない場合は、<strong>コマンドパレット</strong>(<span class="dynamic-keybinding" data-osx="⇧⌘P" data-win="Ctrl+Shift+P" data-linux="Ctrl+Shift+P"><span class="keybinding">⇧⌘P</span> (Windows, Linux <span class="keybinding">Ctrl+Shift+P</span>)</span>)から<strong>Tasks: Configure Task Runner</strong>を実行することで、テンプレートを用意できます。</p><p>今回の例ではリストから<code>Gulp</code>を選択します。上記の例のように <code>gulpfile.js</code>が与えられた場合の<code>tasks.json</code>は次のようになります:</p><figure class="highlight"><table><tr><td class="code"><pre><div class="line">&#123;</div><div class="line">    // See https://go.microsoft.com/fwlink/?LinkId=733558</div><div class="line">    // for the documentation about the tasks.json format</div><div class="line">    "version": "0.1.0",</div><div class="line">    "command": "gulp",</div><div class="line">    "isShellCommand": true,</div><div class="line">    "args": [</div><div class="line">        <span class="string">"--no-color"</span></div><div class="line">    ],</div><div class="line">    "tasks": [</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"taskName"</span>: <span class="string">"build"</span>,</div><div class="line">            <span class="attr">"args"</span>: [],</div><div class="line">            <span class="attr">"isBuildCommand"</span>: <span class="literal">true</span>,</div><div class="line">            <span class="attr">"problemMatcher"</span>: [</div><div class="line">                <span class="string">"$lessCompile"</span>,</div><div class="line">                <span class="string">"$tsc"</span>,</div><div class="line">                <span class="string">"$jshint"</span></div><div class="line">            ]</div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>Monoコンパイラーを実行してC#ファイルをコンパイルするので、<code>$msCompile</code>の問題マッチャーを使用して、コンパイラーによって報告された問題を検出しなければなりません。</p><p>その<code>problemMatcher</code>プロパティは次のようになります:</p><figure class="highlight"><table><tr><td class="code"><pre><div class="line">"problemMatcher": [</div><div class="line">    <span class="string">"$msCompile"</span></div><div class="line">]</div></pre></td></tr></table></figure><p>この<code>tasks.json</code>についていくつか確認しておきましょう:</p><ol><li>gulpコマンドを(直接VS Codeが)シェルを実行するようにしたいので、<strong>isShellCommand</strong>を使用しました。</li><li>明示的に<strong>tasks</strong>プロパティを追加しました。これにより<code>gulpfile.js</code>内にオプションのタスクを増やすことができました。</li><li>問題マッチャー<strong>$msCompile</strong>を定義して、出力を処理しました。C#コンパイルにMonoコンパイラーを使用しているので、Microsoftコンパイラーのパターンに順守し、<strong>msc</strong>として動作します。</li></ol><h2 id="問題マッチャーの定義" class="article-heading"><a href="#問題マッチャーの定義" class="headerlink" title="問題マッチャーの定義"></a>問題マッチャーの定義<a class="article-anchor" href="#問題マッチャーの定義" aria-hidden="true"></a></h2><p>VS Codeは一般的な問題のマッチャーのいくつかを同封しています。ですが実際には、多くのコンパイラーとlintのツールがあります。そしてこれらツールはそれぞれ独自の形式のエラーと警告を生成します。独自の問題マッチャーを確認していきましょう。</p><p>ここに、開発者が<strong>printf</strong>と間違って入力した<strong>prinft</strong>を含む<code>helloWorld.c</code>プログラムがあります。<br>これを<a href="https://gcc.gnu.org/" target="_blank" rel="external">gcc</a>でコンパイルすれば次の警告を表示します:</p><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">helloWorld.c:5:3: warning: implicit declaration of <span class="keyword">function</span> ‘prinft’</div></pre></td></tr></table></figure><p>出力のメッセージをキャプチャして、VS Codeで該当する問題を表示できる問題マッチャーを作りたいと思います。問題マッチャーは<a href="https://en.wikipedia.org/wiki/Regular_expression" target="_blank" rel="external">正規表現</a>に大きく依存しています。<br>次のセクションは、正規表現に精通していることを前提にしています。</p><blockquote><p><strong>Tip:</strong> 私たちは<a href="https://regex101.com/" target="_blank" rel="external">RegEx101 playground</a>が正規表現を確認するときにいい方法であることを確認しています。</p></blockquote><p>上記の警告(エラー)をキャプチャするマッチャーは次のようになります:</p><figure class="highlight"><table><tr><td class="code"><pre><div class="line">&#123;</div><div class="line">    // The problem is owned by the cpp language service.</div><div class="line">    "owner": "cpp",</div><div class="line">    // The file name for reported problems is relative to the opened folder.</div><div class="line">    "fileLocation": ["relative", "$&#123;workspaceRoot&#125;"],</div><div class="line">    // The actual pattern to match problems in the output.</div><div class="line">    "pattern": &#123;</div><div class="line">        // The regular expression. Example to match: helloWorld.c:5:3: warning: implicit declaration of function ‘prinft’ [-Wimplicit-function-declaration]</div><div class="line">        "regexp": "^(.*):(\\d+):(\\d+):\\s+(warning|error):\\s+(.*)$",</div><div class="line">        // The first match group matches the file name which is relative.</div><div class="line">        "file": 1,</div><div class="line">        // The second match group matches the line on which the problem occurred.</div><div class="line">        "line": 2,</div><div class="line">        // The third match group matches the column at which the problem occurred.</div><div class="line">        "column": 3,</div><div class="line">        // The fourth match group matches the problem's severity. Can be ignored. Then all problems are captured as errors.</div><div class="line">        "severity": 4,</div><div class="line">        // The fifth match group matches the message.</div><div class="line">        "message": 5</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>ファイル、行、メッセージのプロパティが必須であることに注意してください。</p><p>次の<code>tasks.json</code>ファイルは先ほどの例からコメントを削除した、実際のタスクです:</p><figure class="highlight json"><table><tr><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"version"</span>: <span class="string">"0.1.0"</span>,</div><div class="line">    <span class="attr">"command"</span>: <span class="string">"gcc"</span>,</div><div class="line">    <span class="attr">"args"</span>: [<span class="string">"-Wall"</span>, <span class="string">"helloWorld.c"</span>, <span class="string">"-o"</span>, <span class="string">"helloWorld"</span>],</div><div class="line">    <span class="attr">"problemMatcher"</span>: &#123;</div><div class="line">        <span class="attr">"owner"</span>: <span class="string">"cpp"</span>,</div><div class="line">        <span class="attr">"fileLocation"</span>: [<span class="string">"relative"</span>, <span class="string">"$&#123;workspaceRoot&#125;"</span>],</div><div class="line">        <span class="attr">"pattern"</span>: &#123;</div><div class="line">            <span class="attr">"regexp"</span>: <span class="string">"^(.*):(\\d+):(\\d+):\\s+(warning|error):\\s+(.*)$"</span>,</div><div class="line">            <span class="attr">"file"</span>: <span class="number">1</span>,</div><div class="line">            <span class="attr">"line"</span>: <span class="number">2</span>,</div><div class="line">            <span class="attr">"column"</span>: <span class="number">3</span>,</div><div class="line">            <span class="attr">"severity"</span>: <span class="number">4</span>,</div><div class="line">            <span class="attr">"message"</span>: <span class="number">5</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>VS Code内でこれを実行し、<span class="dynamic-keybinding" data-osx="⇧⌘M" data-win="Ctrl+Shift+M" data-linux="Ctrl+Shift+M"><span class="keybinding">⇧⌘M</span> (Windows, Linux <span class="keybinding">Ctrl+Shift+M</span>)</span>をおして次のような問題のリストを表示します:</p><p><img src="images/tasks/problemmatcher.png" alt="GCC Problem Matcher"></p><p>パターン内で使用可能なプロパティはもう複数あります:</p><ul><li><strong>location</strong> if the problem location is line or line,column or startLine,startColumn,endLine,endColumn then our generic location match group can be used.</li><li><strong>endLine</strong> the match group index for the problem’s end line. Can be omitted if no end line value is provided by the compiler.</li><li><strong>endColumn</strong> the match group index for the problem’s end column. Can be omitted if no end column value is provided by the compiler.</li><li><strong>code</strong> the match group index for the problem’s code. Can be omitted if no code value is provided by the compiler.</li></ul><blockquote><p><strong>Note:</strong> これらパターンにはファイル、メッセージ、行、場所のマッチグループを指定する必要があります。</p></blockquote><h2 id="複数行の問題マッチャーの定義" class="article-heading"><a href="#複数行の問題マッチャーの定義" class="headerlink" title="複数行の問題マッチャーの定義"></a>複数行の問題マッチャーの定義<a class="article-anchor" href="#複数行の問題マッチャーの定義" aria-hidden="true"></a></h2><p>いくつかのツールではstylishを利用している場合に、ソースファイル内の問題を複数行に広げて表現します。例として<a href="http://eslint.org/" target="_blank" rel="external">ESLint</a>をとります。このstylishモードでは次のような出力を得ます:</p><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">test.js</div><div class="line">  1:0   error  Missing <span class="string">"use strict"</span> statement                 strict</div><div class="line">✖ 1 problems (1 errors, 0 warnings)</div></pre></td></tr></table></figure><p>私たちの問題マッチャーは行を基準とするので、メッセージ(1:0 error Missing “use strict” statement)で使用したものとは異なる正規表現を使用して、test.js(ファイル名)をキャプチャする必要があります。</p><p>これを行うには、<strong>pattern</strong>プロパティで複数の問題パターンを使用します。この方法で、一致させたい行ごとにパターンを定義します。</p><p>次の問題パターンは、stylishモードにおいてESLintからの出力に対応できます。ですが、これにはまだ問題がありますのでこの次で解決しましょう。次のコードで、1番目の正規表現はファイル名を取得し、2番目の正規表現は行、列、重大度、メッセージおよびエラーコードを取得します。</p><figure class="highlight json"><table><tr><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"owner"</span>: <span class="string">"javascript"</span>,</div><div class="line">    <span class="attr">"fileLocation"</span>: [<span class="string">"relative"</span>, <span class="string">"$&#123;workspaceRoot&#125;"</span>],</div><div class="line">    <span class="attr">"pattern"</span>: [</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"regexp"</span>: <span class="string">"^([^\\s].*)$"</span>,</div><div class="line">            <span class="attr">"file"</span>: <span class="number">1</span></div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"regexp"</span>: <span class="string">"^\\s+(\\d+):(\\d+)\\s+(error|warning|info)\\s+(.*)\\s\\s+(.*)$"</span>,</div><div class="line">            <span class="attr">"line"</span>: <span class="number">1</span>,</div><div class="line">            <span class="attr">"column"</span>: <span class="number">2</span>,</div><div class="line">            <span class="attr">"severity"</span>: <span class="number">3</span>,</div><div class="line">            <span class="attr">"message"</span>: <span class="number">4</span>,</div><div class="line">            <span class="attr">"code"</span>: <span class="number">5</span></div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>もちろんこれほど簡単なものではなく、リソースに他複数の問題があるならこれは機能しません。たとえば、ESLintからの次の出力を想像してみてください:</p><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">test.js</div><div class="line">  1:0   error  Missing <span class="string">"use strict"</span> statement                 strict</div><div class="line">  1:9   error  foo is defined but never used                  no-unused-vars</div><div class="line">  2:5   error  x is defined but never used                    no-unused-vars</div><div class="line">  2:11  error  Missing semicolon                              semi</div><div class="line">  3:1   error  <span class="string">"bar"</span> is not defined                           no-undef</div><div class="line">  4:1   error  Newline required at end of file but not found  eol-last</div><div class="line">✖ 6 problems (6 errors, 0 warnings)</div></pre></td></tr></table></figure><p>パターンの最初の正規表現は “test.js”と一致し、次に “1:0 error …”.と一致します。次の行の”1:9 error …”は処理されますが、先ほどの正規表現では一致しないため問題はキャプチャされません。</p><p>これを機能させるために、パターン最後の正規表現で<strong>loop</strong>プロパティを指定することができます。<strong>true</strong>に設定すると正規表現が一致するかぎり、出力内の各行にし対してマッチャーの最後のパターンを適用し続けるようにタスクシステムに指示します。</p><p>すべてのパターンでキャプチャされた情報は、最後のパターンでキャプチャされた情報と組み合わせて、VS Code内の問題に変換されます。</p><p>これはESLintにおけるstylish問題を完全にキャプチャするための問題マッチャーです:</p><figure class="highlight json"><table><tr><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"owner"</span>: <span class="string">"javascript"</span>,</div><div class="line">    <span class="attr">"fileLocation"</span>: [<span class="string">"relative"</span>, <span class="string">"$&#123;workspaceRoot&#125;"</span>],</div><div class="line">    <span class="attr">"pattern"</span>: [</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"regexp"</span>: <span class="string">"^([^\\s].*)$"</span>,</div><div class="line">            <span class="attr">"file"</span>: <span class="number">1</span></div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"regexp"</span>: <span class="string">"^\\s+(\\d+):(\\d+)\\s+(error|warning|info)\\s+(.*)\\s\\s+(.*)$"</span>,</div><div class="line">            <span class="attr">"line"</span>: <span class="number">1</span>,</div><div class="line">            <span class="attr">"column"</span>: <span class="number">2</span>,</div><div class="line">            <span class="attr">"severity"</span>: <span class="number">3</span>,</div><div class="line">            <span class="attr">"message"</span>: <span class="number">4</span>,</div><div class="line">            <span class="attr">"code"</span>: <span class="number">5</span>,</div><div class="line">            <span class="attr">"loop"</span>: <span class="literal">true</span></div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="バックグラウンド-監視-タスク" class="article-heading"><a href="#バックグラウンド-監視-タスク" class="headerlink" title="バックグラウンド / 監視 タスク"></a>バックグラウンド / 監視 タスク<a class="article-anchor" href="#バックグラウンド-監視-タスク" aria-hidden="true"></a></h2><p>いくつかのツールはバックグラウンドでの動作をサポートしています。これはファイルシステムでファイルの変更を監視し、ディスク上でファイルが変更されたときにタスクをトリガーします。<code>Gulp</code>はこのような機能を<a href="https://www.npmjs.com/package/gulp-watch" target="_blank" rel="external">gulp-watch</a>により提供しています。TypeScriptコンパイラ<code>tsc</code>では、これを<code>--watch command</code>のラインオプションによってサポートしています。</p><p>バックグランドのタスクはVS Code内でのフィードバックを提供するために、問題マッチャーは出力における追加の情報を検出するために、いずれも状態を示す追加の情報を使用する必要があります。<code>tsc</code>を例にとってみましょう。コンパイラーがwatchモードで起動されると、次の追加情報がコンソールに出力されます:</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">&gt; tsc --watch</div><div class="line">12:30:36 PM - Compilation complete. Watching for file changes.</div></pre></td></tr></table></figure><p>ディスク上の問題があるファイルが変更されると、次の出力を表示します:</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">12:32:35 PM - File change detected. Starting incremental compilation...</div><div class="line">src/messages.ts(276,9): error TS2304: Cannot find name &apos;candidate&apos;.</div><div class="line">12:32:35 PM - Compilation complete. Watching for file changes.</div></pre></td></tr></table></figure><p>出力では次のようなパターンを監視しています:</p><ul><li><code>File change detected. Starting incremental compilation...</code>がコンソールに表示されているときコンパイラーを実行します。</li><li><code>Compilation complete. Watching for file changes.</code>がコンソールに表示されているときコンパイラーを停止します。</li><li>この間に問題は報告されます。</li><li>またコンパイラーは最初の開始(<code>File change detected. Starting incremental compilation...</code>がコンソールに表示されていない場合)でも一度実行します。</li></ul><p>この情報をキャプチャするために、問題マッチャーは<code>watching</code>プロパティを提供できます。</p><p>tscコンパイラーの場合は次のようになります:</p><figure class="highlight"><table><tr><td class="code"><pre><div class="line">"watching": &#123;</div><div class="line">    "activeOnStart": true,</div><div class="line">    "beginsPattern": "^\\s*\\d&#123;1,2&#125;:\\d&#123;1,2&#125;:\\d&#123;1,2&#125;(?: AM| PM)? - File change detected\\. Starting incremental compilation\\.\\.\\.",</div><div class="line">    "endsPattern": "^\\s*\\d&#123;1,2&#125;:\\d&#123;1,2&#125;:\\d&#123;1,2&#125;(?: AM| PM)? - Compilation complete\\. Watching for file changes\\."</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>問題マッチャーの<code>watching</code>プロパティに加えて、タスク自体に<code>isBackground</code>とマークして、タスクがバッググラウンドで実行し続けるようにする必要があります。</p><p>watchモードで機能するtscタスクの完全なtasks.jsonは次のようになります:</p><figure class="highlight json"><table><tr><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"version"</span>: <span class="string">"0.1.0"</span>,</div><div class="line">    <span class="attr">"command"</span>: <span class="string">"tsc"</span>,</div><div class="line">    <span class="attr">"suppressTaskName"</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">"tasks"</span>: [</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"taskName"</span>: <span class="string">"watch"</span>,</div><div class="line">            <span class="attr">"args"</span>: [<span class="string">"--watch"</span>],</div><div class="line">            <span class="attr">"isBackground"</span>: <span class="literal">true</span>,</div><div class="line">            <span class="attr">"problemMatcher"</span>: &#123;</div><div class="line">                <span class="attr">"owner"</span>: <span class="string">"typescript"</span>,</div><div class="line">                <span class="attr">"fileLocation"</span>: <span class="string">"relative"</span>,</div><div class="line">                <span class="attr">"pattern"</span>: &#123;</div><div class="line">                    <span class="attr">"regexp"</span>: <span class="string">"^([^\\s].*)\\((\\d+|\\,\\d+|\\d+,\\d+,\\d+,\\d+)\\):\\s+(error|warning|info)\\s+(TS\\d+)\\s*:\\s*(.*)$"</span>,</div><div class="line">                    <span class="attr">"file"</span>: <span class="number">1</span>,</div><div class="line">                    <span class="attr">"location"</span>: <span class="number">2</span>,</div><div class="line">                    <span class="attr">"severity"</span>: <span class="number">3</span>,</div><div class="line">                    <span class="attr">"code"</span>: <span class="number">4</span>,</div><div class="line">                    <span class="attr">"message"</span>: <span class="number">5</span></div><div class="line">                &#125;,</div><div class="line">                <span class="attr">"watching"</span>: &#123;</div><div class="line">                    <span class="attr">"activeOnStart"</span>: <span class="literal">true</span>,</div><div class="line">                    <span class="attr">"beginsPattern"</span>: <span class="string">"^\\s*\\d&#123;1,2&#125;:\\d&#123;1,2&#125;:\\d&#123;1,2&#125;(?: AM| PM)? - File change detected\\. Starting incremental compilation\\.\\.\\."</span>,</div><div class="line">                    <span class="attr">"endsPattern"</span>: <span class="string">"^\\s*\\d&#123;1,2&#125;:\\d&#123;1,2&#125;:\\d&#123;1,2&#125;(?: AM| PM)? - Compilation complete\\. Watching for file changes\\."</span></div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="次のステップ" class="article-heading"><a href="#次のステップ" class="headerlink" title="次のステップ"></a>次のステップ<a class="article-anchor" href="#次のステップ" aria-hidden="true"></a></h2><p>That was tasks - let’s keep going…</p><ul><li><a href="/docs/userguide/tasks-appendix.html">tasks.json Schema</a> - You can review the full <code>tasks.json</code> schema and descriptions.</li><li><a href="/docs/userguide/codebasics.html">Basic Editing</a> - Learn about the powerful VS Code editor.</li><li><a href="/docs/userguide/editingevolved.html">Code Navigation</a> - Move quickly through your source code.* <a href="/docs/languages/overview.html">Language Support</a> - Learn about our supported programming languages, both shipped with VS Code and through community extensions.</li><li><a href="/docs/userguide/debugging.html">Debugging</a> - Debug your source code directly in the VS Code editor.</li></ul></div><footer class="article-footer"><time class="article-updated" datetime="2017-07-12T08:08:47.561Z" itemprop="dateModified">Last updated: 2017-07-12</time><p>42757495f4d9a4a7a959e45a7eb459c388b04aaf</p></footer></div></div><aside id="article-toc" role="navigation"><div id="article-toc-inner"><strong class="sidebar-title">Contents</strong><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#タスクを利用して外部ツールと統合する"><span class="toc-text">タスクを利用して外部ツールと統合する</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Hello-World"><span class="toc-text">Hello World</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#出力ウィンドウの動作"><span class="toc-text">出力ウィンドウの動作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#echoCommand"><span class="toc-text">echoCommand</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#command-and-tasks"><span class="toc-text">command and tasks[]</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#複数のコマンドを実行"><span class="toc-text">複数のコマンドを実行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#タスクにキーボードショートカットをバインド"><span class="toc-text">タスクにキーボードショートカットをバインド</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#変数置換-変数"><span class="toc-text">変数置換 (変数)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OS特有のプロパティ"><span class="toc-text">OS特有のプロパティ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#実践的なタスクの例"><span class="toc-text">実践的なタスクの例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#TypeScriptをJavaScriptに変換"><span class="toc-text">TypeScriptをJavaScriptに変換</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MarkdownをHTMLにコンパイル"><span class="toc-text">MarkdownをHTMLにコンパイル</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LessとSassをCSSへ変換"><span class="toc-text">LessとSassをCSSへ変換</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Gulp-Grunt-Jakeタスクの自動検出"><span class="toc-text">Gulp, Grunt, Jakeタスクの自動検出</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#問題マッチャーによるタスク出力の処理"><span class="toc-text">問題マッチャーによるタスク出力の処理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Gulp-Grunt-Jake出力のマッピング"><span class="toc-text">Gulp, Grunt, Jake出力のマッピング</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#問題マッチャーの定義"><span class="toc-text">問題マッチャーの定義</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#複数行の問題マッチャーの定義"><span class="toc-text">複数行の問題マッチャーの定義</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#バックグラウンド-監視-タスク"><span class="toc-text">バックグラウンド / 監視 タスク</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#次のステップ"><span class="toc-text">次のステップ</span></a></li></ol></li></ol><a href="#" id="article-toc-top">Back to Top</a></div></aside></div></article><aside id="sidebar" role="navigation"><div class="inner"><div class="accordion"><label class="sidebar-title" for="Setup">Setup<i></i></label><input id="Setup" type="checkbox"><div class="ac-cont"><a href="/docs/setup/setup-overview.html" class="sidebar-link">Overview</a><a href="/docs/setup/linux.html" class="sidebar-link">Linux</a><a href="/docs/setup/windows.html" class="sidebar-link">Windows</a><a href="/docs/setup/additional-components.html" class="sidebar-link">Additional Compnents</a></div><label class="sidebar-title" for="GetStarted">GetStarted<i></i></label><input id="GetStarted" type="checkbox"><div class="ac-cont"><a href="/docs/getstarted/introvideos.html" class="sidebar-link">Intro Videos</a><a href="/docs/getstarted/userinterface.html" class="sidebar-link">User Interface</a><a href="/docs/getstarted/themes.html" class="sidebar-link">Themes</a><a href="/docs/getstarted/settings.html" class="sidebar-link">Settings</a><a href="/docs/getstarted/keybindings.html" class="sidebar-link">Key Bindings</a><a href="/docs/getstarted/locales.html" class="sidebar-link">Display Language</a></div><label class="sidebar-title" for="UserGuide">UserGuide<i></i></label><input id="UserGuide" type="checkbox" checked><div class="ac-cont"><a href="/docs/userguide/codebasics.html" class="sidebar-link">Basic Editing</a><a href="/docs/userguide/intellisense.html" class="sidebar-link">IntelliSense</a><a href="/docs/userguide/editingevolved.html" class="sidebar-link">Code Navigation</a><a href="/docs/userguide/versioncontrol.html" class="sidebar-link">Version Control</a><a href="/docs/userguide/tasks.html" class="sidebar-link current">Tasks</a><a href="/docs/userguide/userdefinedsnippets.html" class="sidebar-link">Creating your own Snippets</a><a href="/docs/userguide/command-line.html" class="sidebar-link">Command Line</a><a href="/docs/userguide/accessibility.html" class="sidebar-link">Accessibility</a></div><label class="sidebar-title" for="Languages">Languages<i></i></label><input id="Languages" type="checkbox"><div class="ac-cont"><a href="/docs/languages/overview.html" class="sidebar-link">Overview</a><a href="/docs/languages/html.html" class="sidebar-link">HTML</a><a href="/docs/languages/css.html" class="sidebar-link">CSS, Sass and Less</a><a href="/docs/languages/cpp.html" class="sidebar-link">C++</a></div><label class="sidebar-title" for="Extensions">Extensions<i></i></label><input id="Extensions" type="checkbox"><div class="ac-cont"><a href="/docs/extensions/overview.html" class="sidebar-link">Overview</a><a href="/docs/extensions/yocode.html" class="sidebar-link">Extension Generator</a><a href="/docs/extensions/samples.html" class="sidebar-link">Additional Examples</a><a href="/docs/extensions/publish-extension.html" class="sidebar-link">Publishing Extensions</a></div><label class="sidebar-title" for="ExtensionAPI">ExtensionAPI<i></i></label><input id="ExtensionAPI" type="checkbox"><div class="ac-cont"><a href="/docs/extensionapi/overview.html" class="sidebar-link">Overview</a><a href="/docs/extensionapi/extension-manifest.html" class="sidebar-link">Extension Manifest</a><a href="/docs/extensionapi/extension-points.html" class="sidebar-link">Extension Points</a><a href="/docs/extensionapi/activation-events.html" class="sidebar-link">Activation Events</a><a href="/docs/extensionapi/vscode-api-commands.html" class="sidebar-link">Complex Commands</a><a href="/docs/extensionapi/api-scm.html" class="sidebar-link">Source Control API</a></div><label class="sidebar-title" for="Supporting">Supporting<i></i></label><input id="Supporting" type="checkbox"><div class="ac-cont"><a href="/docs/supporting/faq.html" class="sidebar-link">FAQ</a><a href="/docs/supporting/requirements.html" class="sidebar-link">Requirements</a><a href="/docs/supporting/errors.html" class="sidebar-link">Errors</a></div><label class="sidebar-title" for="Other">Other<i></i></label><input id="Other" type="checkbox"><div class="ac-cont"><a href="/docs/other/dotnet.html" class="sidebar-link">.NET Core</a></div></div></div></aside></div></div></div></div><div id="mobile-nav-dimmer"></div><nav id="mobile-nav"><div id="mobile-nav-inner"><ul id="mobile-nav-list"><a href="/docs/" class="mobile-nav-link">Docs</a><a href="/updates/" class="mobile-nav-link">Updates</a></ul><strong class="mobile-nav-title">Setup</strong><a href="/docs/setup/setup-overview.html" class="mobile-nav-link">Overview</a><a href="/docs/setup/linux.html" class="mobile-nav-link">Linux</a><a href="/docs/setup/windows.html" class="mobile-nav-link">Windows</a><a href="/docs/setup/additional-components.html" class="mobile-nav-link">Additional Compnents</a><strong class="mobile-nav-title">GetStarted</strong><a href="/docs/getstarted/introvideos.html" class="mobile-nav-link">Intro Videos</a><a href="/docs/getstarted/userinterface.html" class="mobile-nav-link">User Interface</a><a href="/docs/getstarted/themes.html" class="mobile-nav-link">Themes</a><a href="/docs/getstarted/settings.html" class="mobile-nav-link">Settings</a><a href="/docs/getstarted/keybindings.html" class="mobile-nav-link">Key Bindings</a><a href="/docs/getstarted/locales.html" class="mobile-nav-link">Display Language</a><strong class="mobile-nav-title">UserGuide</strong><a href="/docs/userguide/codebasics.html" class="mobile-nav-link">Basic Editing</a><a href="/docs/userguide/intellisense.html" class="mobile-nav-link">IntelliSense</a><a href="/docs/userguide/editingevolved.html" class="mobile-nav-link">Code Navigation</a><a href="/docs/userguide/versioncontrol.html" class="mobile-nav-link">Version Control</a><a href="/docs/userguide/tasks.html" class="mobile-nav-link current">Tasks</a><a href="/docs/userguide/userdefinedsnippets.html" class="mobile-nav-link">Creating your own Snippets</a><a href="/docs/userguide/command-line.html" class="mobile-nav-link">Command Line</a><a href="/docs/userguide/accessibility.html" class="mobile-nav-link">Accessibility</a><strong class="mobile-nav-title">Languages</strong><a href="/docs/languages/overview.html" class="mobile-nav-link">Overview</a><a href="/docs/languages/html.html" class="mobile-nav-link">HTML</a><a href="/docs/languages/css.html" class="mobile-nav-link">CSS, Sass and Less</a><a href="/docs/languages/cpp.html" class="mobile-nav-link">C++</a><strong class="mobile-nav-title">Extensions</strong><a href="/docs/extensions/overview.html" class="mobile-nav-link">Overview</a><a href="/docs/extensions/yocode.html" class="mobile-nav-link">Extension Generator</a><a href="/docs/extensions/samples.html" class="mobile-nav-link">Additional Examples</a><a href="/docs/extensions/publish-extension.html" class="mobile-nav-link">Publishing Extensions</a><strong class="mobile-nav-title">ExtensionAPI</strong><a href="/docs/extensionapi/overview.html" class="mobile-nav-link">Overview</a><a href="/docs/extensionapi/extension-manifest.html" class="mobile-nav-link">Extension Manifest</a><a href="/docs/extensionapi/extension-points.html" class="mobile-nav-link">Extension Points</a><a href="/docs/extensionapi/activation-events.html" class="mobile-nav-link">Activation Events</a><a href="/docs/extensionapi/vscode-api-commands.html" class="mobile-nav-link">Complex Commands</a><a href="/docs/extensionapi/api-scm.html" class="mobile-nav-link">Source Control API</a><strong class="mobile-nav-title">Supporting</strong><a href="/docs/supporting/faq.html" class="mobile-nav-link">FAQ</a><a href="/docs/supporting/requirements.html" class="mobile-nav-link">Requirements</a><a href="/docs/supporting/errors.html" class="mobile-nav-link">Errors</a><strong class="mobile-nav-title">Other</strong><a href="/docs/other/dotnet.html" class="mobile-nav-link">.NET Core</a></div></nav><a id="scroll-to-top" role="button" aria-label="scroll to top" onclick="container.scrollTop=0"><span class="icon"></span></a><script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script><script src="/js/toc.js"></script><script src="/js/mobile_nav.js"></script><script src="/js/plugins.js"></script></body></html>